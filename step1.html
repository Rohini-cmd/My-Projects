<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>signup/password</title>
    <link rel="stylesheet" href="bootstrap.css">
    <link rel="stylesheet" href="signin.css">
    <link rel="stylesheet" href="step1.css">
     <script src="jquery.js"></script>
    
</head>
<body>
    <div class="container-fluid main1">
        
            <div class="row-fluid d-flex justify-content-center align-items-center header">
                 <div class="col-4 d-flex ">
                     <img id='img1' src="netflixicon.png" alt="">
                 </div>
                 <div class=" col-2 offset-6 signcol">
                    <input type="button" value="Sign in" id="sign-in">
                 </div>
            </div>
          
        
            <div class="container box">
           
                <div class="container-fluid  inner-box">
                     <div class="row error1 d-flex">
                         <div class="col-1">
                            <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" fill="currentColor" class="bi bi-exclamation-triangle" viewBox="0 0 16 16">
                            <path d="M7.938 2.016A.13.13 0 0 1 8.002 2a.13.13 0 0 1 .063.016.146.146 0 0 1 .054.057l6.857 11.667c.036.06.035.124.002.183a.163.163 0 0 1-.054.06.116.116 0 0 1-.066.017H1.146a.115.115 0 0 1-.066-.017.163.163 0 0 1-.054-.06.176.176 0 0 1 .002-.183L7.884 2.073a.147.147 0 0 1 .054-.057zm1.044-.45a1.13 1.13 0 0 0-1.96 0L.165 13.233c-.457.778.091 1.767.98 1.767h13.713c.889 0 1.438-.99.98-1.767L8.982 1.566z"/>
                            <path d="M7.002 12a1 1 0 1 1 2 0 1 1 0 0 1-2 0zM7.1 5.995a.905.905 0 1 1 1.8 0l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 5.995z"/>
                            </svg>
                         </div>
                         <div class="col-10 " id="eror-msg-top">
                            Your message must contain between 8 and 60 characters<span id="hint"> (atleast 1 of [A_Z,a-z,0-9,@,#..])</span>.
                         </div>
                     </div>
                     <div class="row fields2" id="msg-a">
                          <div class="col-12 msg-a">STEP 1 OF 3</div>
                     </div>
                      <div class="row fields2">
                          <div class="col-12">
                              <h1>Welcome back!<br> Joining Netflix is easy</h1>
                              <p id="msg-b">Enter your password and you'll be watching in no time.</p>
                     </div>
                     </div>
                     <div class="row ">
                          <p id="msg-c">Email</p>
                          <span id="msg-d">rajesh@gmail.com</span> 
                     </div>
                      <div class="row fields3">
                          <div class="col-12 password d-flex flex-column justify-content-center" >
                              <span id="password-msg">Password</span>
                              <input type="password" id="password" placeholder="Password">
                          </div>
                          <span class="error"  >Enter password.</span>
                          <div class="row fields2"><a id="msg-e" href="">Forgot your password?</a></div>
                      </div>
                     
                      <div class="row fields2 ">
                         <div class="col-12"> <button id="sign-btn">Next</button></div> 
                      </div> 
                </div>
            </div>
        <div class="container-fluid  btm">
            <div class="container btm-cnt">
                 <div class="row-fluid">
                     <div class="col-11 " id="links">Questions? Call <u>000-800-919-1694</u>
                     </div>
                 </div>
                 <div class="row links">
            
                     <div class="col-lg-4 col-md-3 col-sm-6 col-6"><a href="" class="links">FAQ</a></div>
                     <div class="col-lg-4 col-md-3 col-sm-6 col-6"><a href="" class="links">Help Center</a></div>
                     <div class="col-lg-4 col-md-3 col-sm-6 col-6"><a href="" class="links">Privacy</a></div>
                     <div class="col-lg-4 col-md-3 col-sm-6 col-6"><a href="" class="links">Cookie Preferences</a></div>
                     <div class="col-lg-4 col-md-3 col-sm-6 col-6"><a href="" class="links">Corporate Information</a></div>
                     <div class="col-lg-4 col-md-3 col-sm-6 col-6"><a href="" class="links">Contact Us</a></div>

            
                </div>
                 <div class="row-fluid opt">
                   <div class="col-6 d-flex justify-content-center" id='lang' >
                      <span>
                       <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-globe" viewBox="0 0 16 16">
                           <path d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8zm7.5-6.923c-.67.204-1.335.82-1.887 1.855A7.97 7.97 0 0 0 5.145 4H7.5V1.077zM4.09 4a9.267 9.267 0 0 1 .64-1.539 6.7 6.7 0 0 1 .597-.933A7.025 7.025 0 0 0 2.255 4H4.09zm-.582 3.5c.03-.877.138-1.718.312-2.5H1.674a6.958 6.958 0 0 0-.656 2.5h2.49zM4.847 5a12.5 12.5 0 0 0-.338 2.5H7.5V5H4.847zM8.5 5v2.5h2.99a12.495 12.495 0 0 0-.337-2.5H8.5zM4.51 8.5a12.5 12.5 0 0 0 .337 2.5H7.5V8.5H4.51zm3.99 0V11h2.653c.187-.765.306-1.608.338-2.5H8.5zM5.145 12c.138.386.295.744.468 1.068.552 1.035 1.218 1.65 1.887 1.855V12H5.145zm.182 2.472a6.696 6.696 0 0 1-.597-.933A9.268 9.268 0 0 1 4.09 12H2.255a7.024 7.024 0 0 0 3.072 2.472zM3.82 11a13.652 13.652 0 0 1-.312-2.5h-2.49c.062.89.291 1.733.656 2.5H3.82zm6.853 3.472A7.024 7.024 0 0 0 13.745 12H11.91a9.27 9.27 0 0 1-.64 1.539 6.688 6.688 0 0 1-.597.933zM8.5 12v2.923c.67-.204 1.335-.82 1.887-1.855.173-.324.33-.682.468-1.068H8.5zm3.68-1h2.146c.365-.767.594-1.61.656-2.5h-2.49a13.65 13.65 0 0 1-.312 2.5zm2.802-3.5a6.959 6.959 0 0 0-.656-2.5H12.18c.174.782.282 1.623.312 2.5h2.49zM11.27 2.461c.247.464.462.98.64 1.539h1.835a7.024 7.024 0 0 0-3.072-2.472c.218.284.418.598.597.933zM10.855 4a7.966 7.966 0 0 0-.468-1.068C9.835 1.897 9.17 1.282 8.5 1.077V4h2.355z"/>
                         </svg>
                       </span>
                       <select name="language" id="language">
                          <option value="English"> English</option>
                          <option value="Hindi">Hindi</option>
                       </select>
                   </div>
                 </div>
            </div>
        </div>
   </div>

   <script>
    $(document).ready(()=>{
         //sign-in page link..
         $('#sign-in').click(()=>{
               window.location.href='signin.html';
            })

        //setting email entered in first page..
        let email=sessionStorage.getItem('email');
        $('#msg-d').text(email);

         //password box script..
        $('.password').click(()=>{
               mailmod($('#password-msg'),$('#password'));
        });

        $('#sign-btn').click(()=>{
            signup();
        })
        //sign up function..
            function signup(){
            let records={   
                         email:email,
                         password: pswdVld($('#password'),$('.password'),$('.error'),$('.error1')),
                         plan:{
                   type:'',
                   cost:0,
                   subscribed:false,
                 },
                         keepin:false,
                         status:'',
                         moviesList:[],
                         liked:[]
            }
            if(records.password){
            let retrived = localStorage.getItem("accounts");
            let flag=0;
             if(retrived== null){
                 taskobj = [];flag=1;
             }else {
                 taskobj = JSON.parse(retrived);
                 taskobj.forEach(element => {
                     flag=1;console.log('lets match')
                       if(element.email==records.email){flag=0;
                         if(element.password==records.password){
                            if(element.plan.subscribed==true){
                           modifyCntnt();
                            window.location.href='mn.html';
                          }else{
                            window.location.href='step2.html';
                          }
                           }else{
                            $('.error').css('visibility','visible');
                            $('.error').text('*wrong password');
                            $('.password').css('border','1px solid red'); 
                           }
                        }
                 });
             }
             if(flag){ console.log('match not found')
               taskobj.push(records);
               localStorage.setItem("accounts",JSON.stringify(taskobj));
               
               modifyCntnt();
               window.location.href='step2.html';
             }
            }}
            //after creation of account..
            function modifyCntnt(){
                $('.fields3').css('display','none');
            }
        
           //password box modification function..
           function mailmod(msg,emal){
               msg.css('display','block');
               emal.attr('placeholder','')
            }   

             //password validation fxn...
             function pswdVld(password,box,error1,error2){
                let pswd=password.val();
                if(pswd==''){
                    error1.css('visibility','visible');
                }else{
                    error1.css('visibility','hidden');
                }
                let chk =/^(?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[!@#\$%\^&\*]).{8,}$/;
                if(pswd.match(chk)){ 
                 box.css('border','1px solid green');  
                (error2).css('visibility','hidden');
                  return pswd;
                }else {
                box.css('border','1px solid red');  
                error2.css('visibility','visible');
                return 0;
              }
            }
    })
   </script>
</body>
</html>